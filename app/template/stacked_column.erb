$(function () {
  $('#<%= @container %>').highcharts({
    chart: {
    	type: 'column'
    },
    title: {
    	text: '<%= @title %>'
    },
    xAxis: {
    	categories: <%= @categories %>
    },
    yAxis: {
    	min: 0,
    	title: {
      	text: '<%= @ytitle %>'
    	},
    	stackLabels: {
      	enabled: true,
      	style: {
    		fontWeight: 'bold',
    			color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
      	}
    	}
    },
    tooltip: {
			pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.percentage:.0f}%)<br/>',
			shared: true
    },
    plotOptions: {
   		column: {
      	stacking: 'normal'
    	}
    },
		<%= @rawdata %>
    series: <%= @data %>
  });
});
